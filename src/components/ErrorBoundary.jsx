import React from 'react';
import MessageBox from './MessageBox';

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    // ë‹¤ìŒ ë Œë”ë§ì—ì„œ í´ë°± UIê°€ ë³´ì´ë„ë¡ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    // ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ì— ì—ëŸ¬ë¥¼ ê¸°ë¡í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
    console.log('ì—ëŸ¬', error, errorInfo);
    this.setState({ hasError: true });
  }

  render() {
    if (this.state.hasError) {
      // í´ë°± UIë¥¼ ì»¤ìŠ¤í…€í•˜ì—¬ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      return (
        <MessageBox msg="ğŸ«¤ ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”">
          <p className="font-thin text-sm">ìƒˆë¡œê³ ì¹¨ì„ ì‹œë„í•´ì£¼ì„¸ìš”</p>
        </MessageBox>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;
